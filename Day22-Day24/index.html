<!DOCTYPE html>
<html>
<head>
    <title>Day22-Day24</title>
</head>
<style type="text/css">
    button {
        display: block;
        margin-top: 15px;
    }
</style>
<body>
<div class="form">
    <label>Number A:<input id="radio-a" type="radio" name="math-obj" value="a"></label>
    <input id="num-a" type="text">
    <label>Number B:<input id="radio-b" type="radio" name="math-obj" value="b"></label>
    <input id="num-b" type="text">
</div>
<div id="btnBox">
    <button data-index="0">判断当前选中的输入框输入内容是否为数字</button>
    <button data-index="1">把 A 四舍五入为 B 个小数位数的数字</button>
    <button data-index="2">当前选中数字的绝对值</button>
    <button data-index="3">对当前选中的数字进行上舍入</button>
    <button data-index="4">对当前选中的数字进行下舍入</button>
    <button data-index="5">把当前选中的数字四舍五入为最接近的整数</button>
    <button data-index="6">返回 A 和 B 中的最高值</button>
    <button data-index="7">返回 A 和 B 中的最低值</button>        
</div>
<p id="result"></p>
<script type="text/javascript">
    var result = document.getElementById('result');
    var showResult = function(text) {
        console.log(text);
        result.innerHTML = text;
    }
    // 检查是否数字并返回结果，因input取值获得的是string，需通过转换来确定
    var checkNumber = function (val) {
        // !Number(0) === true, 所以需加一句val !== '0'
        if (!Number(val) && val !== '0') {
            showResult(val + '不是数字，请重新输入。');
            return { isNum: false };
        }
        return {
            num: Number(val),
            isNum: true,
        }
    }

    document.getElementById('btnBox').onclick = function(e) {
        // 判断是否为button
        if (e.target.nodeName.toLowerCase() !== 'button') {return false;}
        // 获取button的下标，并执行相应事件
        var btnIndex = e.target.dataset.index;
        // 有选中项要求的先获取并判断有没有选中项
        var radio = document.querySelector('.form input[type=radio]:checked');
        if (!radio) {return showResult('请先选择一个输入框')};
        // 判断是否为数值
        if (btnIndex === '0') {
            var input = document.getElementById('num-' + radio.value);
            var resultText = checkNumber(input.value).isNum ? '是数字' : '不是数字';
            //var resultText = !Number(input.value) && input.value !== '0' ? '不是数字' : '是数字';
            return showResult(resultText);
        }

        var inputA = document.getElementById('num-a');
        var inputB = document.getElementById('num-b');
        var numResultA = checkNumber(inputA.value);
        if (!numResultA.isNum) {return false;}
        var numResultB = checkNumber(inputB.value);
        if (!numResultB.isNum) {return false;}
        var input = document.getElementById('num-' + radio.value);
        var numResult = checkNumber(input.value);
        if (!numResult.isNum) {return false;}

        switch (btnIndex) {
            case '1':
                showResult(numResultA.num.toFixed(numResultB.num));
                break;
            case '2':
                showResult(Math.abs(numResult.num));
                break;
            case '3':
                showResult(Math.ceil(numResult.num));
                break;
            case '4':
                showResult(Math.floor(numResult.num));
                break;
            case '5':
                showResult(Math.round(numResult.num));
                break;
            case '6':
                showResult(Math.max(numResultA.num, numResultB.num));
                break;
            case '7':
                showResult(Math.min(numResultA.num, numResultB.num));
                break;
        }
    }
</script>
</body>
</html>